---
import { Image } from 'astro:assets';

import Button from '@/components/common/Button';
import Icon from '@/components/common/Icon';

import { FULL_NAME, WHATSAPP_CONFIG } from '@/constants/config';

import heroImage1 from '@/assets/images/hero-1.jpg';
import heroImage2 from '@/assets/images/hero-2.jpg';
import heroImage3 from '@/assets/images/hero-image.jpg';
import { SECTIONS } from '@/constants/sections';

const heroImages = [
	{
		src: heroImage1,
		alt: 'Gran familia cristiana reunida con pantalla mostrando "Somos la Gran Familia Jesús El Altísimo"',
	},
	{
		src: heroImage2,
		alt: 'Congregación diversa de creyentes con pantalla central mostrando "Jesús El Altísimo" en auditorio moderno',
	},
	{
		src: heroImage3,
		alt: 'Gran grupo de miembros de la iglesia Jesús El Altísimo, en su mayoría adultos mayores, celebrando un aniversario o evento especial. El fondo está decorado con luces festivas y la palabra "AÑOS" iluminada, creando un ambiente de comunidad y alegría',
	},
];
---

<section
	id="#"
	class="w-full h-screen flex items-center justify-center bg-no-repeat bg-cover bg-center p-5 bg-dark"
>
	<div id="hero-carousel" class="hero-carousel">
		{
			heroImages.map((image, index: number) => (
				<Image
					width={image.src.width}
					height={image.src.height}
					src={image.src}
					alt={image.alt}
					class={`hero-image ${index === 0 ? 'active' : ''}`}
					data-index={index}
				/>
			))
		}
	</div>
	<div class="w-full flex flex-col items-center">
		<div class="w-full flex flex-col items-center">
			<h1
				class="text-primary text-center opacity-70 uppercase tracking-widest font-light"
			>
				Iglesia cristiana en Barquisimeto
			</h1>
			<div class="flex gap-2">
				<h2
					class="text-primary text-center text-3xl md:text-4xl font-bold"
				>
					Únete a nuestra gran familia
				</h2>
			</div>
			<p class="text-primary text-center lg:text-xl font-light mt-5">
				Una comunidad unida en Dios, dedicada a adorar, bendecir y
				transformar vidas.
			</p>
		</div>
		<a
			aria-label={`Ir al chat de Whatsapp de ${FULL_NAME}`}
			href=`${WHATSAPP_CONFIG.url}&text=${WHATSAPP_CONFIG.message}`
			target="_blank"
		>
			<Button class="mt-12 text-secondary">
				Enviar mensaje <Icon
					size="xs"
					name="whatsapp"
					color="secondary"
				/>
			</Button>
		</a>
		<a
			class="absolute bg-primary/10 p-4 h-12 w-12 rounded-full bottom-16"
			href={SECTIONS.IDENTITY.path}
			title="Ir al contenido"
			aria-label="Ir al contenido"
			id="arrow"
		>
			<Icon size="xs" name="arrow-right" class="rotate-90" />
		</a>
	</div>
</section>

<style lang="scss">
	#arrow {
		animation: arrow-animation 1.5s infinite;
	}
	section {
		position: relative;
		overflow: hidden;

		.hero-carousel {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;

			.hero-image {
				position: absolute;
				top: -50px;
				left: 0;
				width: 100%;
				height: calc(100% + 50px);
				object-fit: cover;
				filter: brightness(0.5);
				opacity: 0;
				transition: opacity 1s ease-in-out;

				&.active {
					opacity: 1;
				}
			}
		}

		& > div:not(.hero-carousel) {
			z-index: 10;
		}
	}

	@keyframes arrow-animation {
		0% {
			transform: translateY(0);

			opacity: 0;
		}
		100% {
			transform: translateY(50px);
			opacity: 1;
		}
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', function () {
		const heroImages = document.querySelectorAll('.hero-image');
		let currentIndex = 0;

		function showImage(index: number) {
			// Remover la clase active de todas las imágenes
			heroImages.forEach((img) => img.classList.remove('active'));

			// Agregar la clase active a la imagen actual
			heroImages[index].classList.add('active');
		}

		function nextImage() {
			currentIndex = (currentIndex + 1) % heroImages.length;
			showImage(currentIndex);
		}

		// Cambiar imagen cada 5 segundos
		setInterval(nextImage, 5000);

		// Inicializar con la primera imagen
		showImage(0);
	});
</script>
